
集成AGC SDK。       1. 在您的项目中导入agc组件。

* <pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000001626112738__zh-cn_topic_0000001339732409_screen7651415164415" data-highlighted="yes"><ol class="linenums"><li><p>import { initialize } from '@hw-agconnect/hmcore';</p></li></ol></pre>
* 在您的应用初始化阶段使用context初始化SDK，推荐在EntryAbility的onCreate中进行。
* <pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000001626112738__screen1028693411518" data-highlighted="yes"><ol class="linenums"><li><p>import util from '@ohos.util';</p></li><li data-node-id="20251224114752-be64y9c"></li><li><p>//初始化SDK</p></li><li data-node-id="20251224114752-pr7rsxy"><p><span class="">onCreate</span>(want, launchParam) {</p></li><li><p>let input = await this.context.resourceManager.getRawFileContent('agconnect-services.json')</p></li><li data-node-id="20251224114752-c5986lc"><p>    let jsonString  = util.TextDecoder.create('utf-8', {</p></li><li><p>      ignoreBOM: true</p></li><li data-node-id="20251224114752-2mxecak"><p>    }).decodeWithStream(input, {</p></li><li><p>      stream: false</p></li><li data-node-id="20251224114752-go5u8ab"><p>    });</p></li><li></li><li data-node-id="20251224114752-8tvx5pl"><p>    initialize(this.context, JSON.parse(jsonString));</p></li><li><p>}</p></li></ol></pre>
* 在“entry/src/main/module.json5”文件中添加网络权限。

1. 1. <pre class="screen prettyprint linenums hljs language-cangjie" id="ZH-CN_TOPIC_0000001626112738__screen9915169133312" data-highlighted="yes"><ol class="linenums"><li><p>"requestPermissions": [</p></li><li data-node-id="20251224114752-geurty3"><p>  {</p></li><li><p>    "name": "ohos.permission.INTERNET"</p></li><li data-node-id="20251224114752-6mad9e7"><p>  }</p></li><li><p>]</p></li></ol></pre>

## 加载对象类型文件

在开发应用时，可直接将AGC控制台上导出的json格式和js格式文件添加至本地开发环境中。

说明

如下文件名和文件路径为示例，仅供参考。

1. 在本地开发环境“config”路径下，新建***app-schema.json***文件 *，* 文件路径为“ *agc-clouddb-demo-harmonyos/entry/src/main/ets* ”。
2. 将已导出的json格式文件内容复制到***app-schema.json***文件中。
3. 将已导出的其他js格式文件添加至本地开发环境。       文件路径如下所示：

   js格式：*agc-clouddb-demo-harmonyos/entry/src/main/ets/BookInfo.js*

   如果文件已存在，请覆盖原文件。

## 写入数据

在本节主要介绍如何在应用程序中进行数据写入操作，以便您了解如何使用云数据库SDK实现数据的写入。在应用界面中，增加了“添加”按钮，用于用户新增数据，并在代码中通过 **[upsert()](https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/clouddb-harmonyos-ts-databasecollection-0000001626270306#section108601543193811)** 实现数据的写入。

<pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000001626112738__screen317017425514" data-highlighted="yes"><ol class="linenums"><li><p>// 注意目录，目录可以自定义</p></li><li data-node-id="20251224114752-95tc5wu"><p>import { BookInfo } from './BookInfo';</p></li><li><p>import schema from './app-schema.json';</p></li><li data-node-id="20251224114752-bcui1be"></li><li><p>async function upsert () { </p></li><li data-node-id="20251224114752-hl07uyy"><p>    try {</p></li><li><p>      const record = await cloud.database({objectTypeInfo: schema, zoneName: "QuickStartDemo"}).collection(BookInfo).upsert({</p></li><li data-node-id="20251224114752-10qdank"><p>        "id":2000,</p></li><li><p>        "bookName" : "book_name",</p></li><li data-node-id="20251224114752-5vbnqoy"><p>        "author" : "huawei",</p></li><li><p>        "price" : 1020</p></li><li data-node-id="20251224114752-82wh7p1"><p>      });</p></li><li></li><li data-node-id="20251224114752-lo7vw4i"><p>       Logger.info(TAG, "upsert success, record  = " + record);</p></li><li><p>    } catch (err) {</p></li><li data-node-id="20251224114752-8vm7ru7"><p>      Logger.error(TAG, "upsert err------------" + JSON.stringify(err));</p></li><li><p>    }</p></li><li data-node-id="20251224114752-orlxwlq"><p>}</p></li></ol></pre>

## 查询数据

### 数据查询和排序

在应用界面中，增加了“查询”按钮和排序功能，通过 **[query()](https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/clouddb-harmonyos-ts-databasecollection-0000001626270306#section1894820514118)** 实现异步方式查询数据。

<pre class="screen prettyprint linenums hljs language-javascript" id="ZH-CN_TOPIC_0000001626112738__screen573910135537" data-highlighted="yes"><ol class="linenums"><li><p>async function query() {</p></li><li data-node-id="20251224114752-ghzx6l2"><p>    try {</p></li><li><p>      const resultArray = await cloud.database({objectTypeInfo: schema, zoneName: "QuickStartDemo"}).collection(BookInfo).query().get();</p></li><li data-node-id="20251224114752-ti7uek8"></li><li><p>      Logger.info(TAG, "query success : " + JSON.stringify(resultArray));</p></li><li data-node-id="20251224114752-n80tda4"><p>    } catch (err) {</p></li><li><p>      Logger.error(TAG, "query err------------" + JSON.stringify(err));</p></li><li data-node-id="20251224114752-mfrxvri"><p>    }</p></li><li><p>}</p></li></ol></pre>

通过查询与 **[limit()](https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/clouddb-harmonyos-ts-databasezonequery-0000001674750265#section195251849262)** 方法组合，实现限制查询数据显示条数的功能；与 **[orderByAsc()](https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/clouddb-harmonyos-ts-databasezonequery-0000001674750265#section510510507712)** 方法或者 **[orderByDesc()](https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-References/clouddb-harmonyos-ts-databasezonequery-0000001674750265#section4831175212713)** 方法组合来实现数据的排序功能。

<pre class="screen prettyprint linenums hljs language-typescript" id="ZH-CN_TOPIC_0000001626112738__screen295261285513" data-highlighted="yes"><ol class="linenums"><li><p>async function queryWithOrder (object)  {</p></li><li data-node-id="20251224114752-09k9336"><p>    try {</p></li><li><p>      const resultArray = await cloud.database({objectTypeInfo: schema, zoneName:"QuickStartDemo"}).collection(BookInfo).query().equalTo('bookName', object.name).greaterThanOrEqualTo('price', parseFloat(object.minPrice)).lessThanOrEqualTo('price', parseFloat(object.maxPrice)).limit(parseInt(object.bookCount)).orderByAsc('id').get();</p></li><li data-node-id="20251224114752-olkzy2z"></li><li><p>      Logger.info(TAG, "query success : " + JSON.stringify(resultArray));</p></li><li data-node-id="20251224114752-n9bhirj"><p>    } catch (err) {</p></li><li><p>      Logger.error(TAG, "query err------------" + JSON.stringify(err));</p></li><li data-node-id="20251224114752-rrmiyre"><p>    }</p></li></ol></pre>
